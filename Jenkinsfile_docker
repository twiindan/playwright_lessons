pipeline {
   agent { docker { image 'python' } }
   stages {
      stage('Install dependencies') {
         steps {
            sh '''
                pip3 install virtualenv
                python3 -m venv venv
                source venv/bin/activate
                pip3 install -r requirements.txt
                '''
         }
      }
      stage('Execute tests') {
         steps {
            sh '''
                python3 -m pytest framework/test_with_faker.py --alluredir allure-results
                '''
         }
      }
   }
}